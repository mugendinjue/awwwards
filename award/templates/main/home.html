{% extends 'main/base.html' %}
{% load crispy_forms_tags %}

{% block content %}
{{block.super}}
<style>
  li{
    display: none;
  }
  .profile{
    display: flex;
  }
  .date{
    float: right;
  }

  .main{
    position: absolute;
    top: 0;
    background: linear-gradient(to top, rgba(0,0,0,.9) 0%, rgba(0,0,0,.1) 70%);
    height: 70%;
    width: 100%;
  }
  .top{
    position: absolute;
    top: 200px;
    color: wheat;
    left: 600px;
  }
  .top_bottom{
    position: absolute;
    top: 450px;
    left: 70px;
  }

 
</style>

<div class="container-fluid">
  <img src="{{the_project.project.landing_page.url}}" alt="{{project.title}}" class="card-img-top" height="500">
  <div class="top">
    <h2 class="text-center">{{the_project.project.title}}</h2>
    <h5 class="text-center">BY {{the_project.project.user.username}} FROM {{the_project.project.user.profile.nationality}} WITH {{show_top}}</h5>
    <!-- design: {{design_avg}}
    usability: {{usability_avg}}
    creativity: {{creativity_avg}}
    content: {{content.avg}} -->
  </div>
  <div class="top_bottom">
    <button type="button" class="btn btn-outline-light"><a href="{{the_project.project.live_link}}"  target="_blank" ><small>View Site</small></a></button>
  </div>
</div>

<div class="container-fluid ml-3 pl-3 mt-3 pt-3">
<p><strong>Sites of the day </strong>Previous Winners</p>
<div class="row">
  {% if projects %}
    {% for project in projects %}
    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
      <div class="card">
        <img src="{{project.landing_page.url}}" alt="{{project.title}}" class="card-img-top">
        <div class="card-body">
          <h5 class="card-text"><strong>{{project.title}}</strong></h5>
          <div class="flex">
            <p class="card-text">
              From {{project.user.profile.nationality}} 
            </p>
            <p class="card-text date">
              {{project.posted_on}}
            </p>
          </div>
          <div class="profile">
            <img src="{{ project.user.profile.profile_pic.url }}" alt="" style="border-radius: 50%;" height="25" width="25" >
            <p class="card-text ml-1 pl-1"> By <strong>{{project.user.username}}</strong></p>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  {% else %}
  <h2 class="text-center">
    No projects posted yet
  </h2>
  {% endif %}
</div>

<p class="mt-3 pt-3"><strong>Nominees </strong>We need your vote!</p>
<div class="row">
  {% if projects %}
    {% for project in projects %}
    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
      <div class="card">
        <div class="card-images">
        <img src="{{project.landing_page.url}}" alt="{{project.title}}" class="card-img-top">
        <div class="main">
          <div class="content">
            <a href="{% url 'vote' project_id=project.id %}"><button class="btn btn-success btn-sm">Vote now</button></a>
          </div>
        </div>
      </div>
        <div class="card-body">
          <h5 class="card-text"><strong>{{project.title}}</strong></h5>
          <div class="flex">
            <p class="card-text">
              From {{project.user.profile.nationality}} 
            </p>
            <p class="card-text date">
              {{project.posted_on}}
            </p>
          </div>
          <div class="profile">
            <img src="{{ project.user.profile.profile_pic.url }}" alt="" style="border-radius: 50%;" height="25" width="25" >
            <p class="card-text ml-1 pl-1"> By <strong>{{project.user.username}}</strong></p>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  {% else %}
  <h2 class="text-center">
    No projects posted yet
  </h2>
    {% endif %}
  </div>

</div>






<div class="modal fade" id="login" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <small><p class="modal-title" id="exampleModalLongTitle">Already have an <strong>Account </strong><a href="{% url 'login' %}">Login</a> </p></small>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form action="{% url 'register' %}" method="POST">
        <fieldset class="form-group">
          {% csrf_token %}
            {{reg_form|crispy}}
        </fieldset>
        <div class="form-group">
          <input type="submit" value="Register" class="btn btn-outline btn-info">
        </div>
      </form>
    </div>
    <div class="modal-footer">

    </div>
  </div>
</div>
</div>

{% endblock %}